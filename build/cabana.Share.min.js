"use strict";if(!Cabana)var Cabana={};if(Cabana.vars||(Cabana.vars={}),Cabana.vars.Share={twitter:{user:null,text:null,hashtags:null},email:{text:null,subject:null},linkedin:{text:null,title:null},tracking:!0,popup:!0,listeners:[],errors:[]},window.CabanaShareSettings)try{for(var key in window.CabanaShareSettings)for(var object in window.CabanaShareSettings[key])Cabana.vars.Share[key][object]=window.CabanaShareSettings[key][object]}catch(e){}if(Cabana.Share=function(){this.type=arguments[arguments.length-1];var config=arguments.length>1?arguments[0]:null,configOptions;if(config&&(config.url&&(this.url=config.url),config.options&&(configOptions=config.options)),this.url=this.url?this.url:window.location.href,this.shareUrls={facebook:"https://www.facebook.com/sharer/sharer.php",twitter:"https://twitter.com/intent/tweet",linkedin:"https://www.linkedin.com/shareArticle",google:"https://plus.google.com/share"},this.isTouch=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},this.shareTo=function(url,type,newWindow){var startTime,endTime,elapsedTime,intentUrl,tryIntent=!1;this.isTouch()?("twitter"==type&&(intentUrl="twitter://post?message="+url,tryIntent=!0),tryIntent&&(newWindow=!1,startTime=(new Date).getTime(),document.location=intentUrl,endTime=(new Date).getTime(),elapsedTime=endTime-startTime),(void 0===elapsedTime||1>elapsedTime)&&(1==tryIntent?newWindow=!0:void 0,this.openWindow(url,newWindow))):this.openWindow(url,newWindow),this.tracking(type),this.fireListeners()},this.openWindow=function(url,newWindow){if(Cabana.vars.Share.popup&&newWindow!==!1){var windowWidth=screen.width/2,windowHeight=screen.height/2;var windowTop=screen.height/2-windowHeight/2,windowLeft=screen.width/2-windowWidth/2;return void window.open(url,"CabanaSharePopup","top="+windowTop+",left="+windowLeft+",toolbar=0,status=0,width="+windowWidth+",height="+windowHeight)}var anchor=document.createElement("a");anchor.href=url,anchor.target=newWindow!==!1?"_blank":"_self",anchor.style.position="absolute",anchor.style.display="inline-block",anchor.style.opacity="0",anchor.id="CabanaShareA",document.body.appendChild(anchor),anchor.onclick?anchor.onclick():anchor.click(),anchor.remove()},this.tracking=function(type){if(Cabana.vars.Share.tracking)if("undefined"!=typeof dataLayer)try{dataLayer.push({event:"Share."+type.toLowerCase(),title:document.title?document.title:"",url:location.href})}catch(e){}else this.fireEvent(type)},this.fireEvent=function(type){var e;var eventName="Share."+type;document.createEvent?(e=document.createEvent("Event"),e.initEvent(eventName,!0,!1)):(e=document.createEventObject(),e.eventType=eventName),e.eventName=eventName,document.createElement?document.dispatchEvent(e):e.fireEvent("on"+eventName,e)},0==arguments.length){var on=function(event,listenerFn){Cabana.vars.Share.listeners.push({event:event.toLowerCase(),callback:listenerFn})};var off=function(event){[].forEach.call(Cabana.vars.Share.listeners,function(listener,index){listener.event==event.toLowerCase()&&Cabana.vars.Share.listeners.splice(listener,1)})};var listeners=function(){return Cabana.vars.Share.listeners}();var addThis=function(container){var links=[];var recursiveFind=function(element){[].forEach.call(element.children,function(child){0==child.className.indexOf("addthis_button_")?links.push(child):recursiveFind(child)})};recursiveFind(container),links.forEach(function(link){var functionCall,classArray=link.className.split(" ");classArray.forEach(function(className){className.indexOf("addthis_button_")>-1&&(functionCall=className.replace("addthis_button_",""))}),functionCall&&(link.onclick=function(){Cabana.Share(functionCall.toLowerCase())})})};var extend=function(){var artificial={};for(var i=0;i<arguments.length;i++)for(var key in arguments[i])arguments[i].hasOwnProperty(key)&&(artificial[key]=arguments[i][key]);return artificial};return function(){return{on:on,off:off,listeners:listeners,addThis:addThis,extend:extend}}()}this.facebook=function(url){var shareUrl=this.shareUrls.facebook;shareUrl+="?u="+url,this.shareTo(shareUrl,"facebook")},this.twitter=function(url){var shareUrl=this.shareUrls.twitter;shareUrl+="?url="+url;var options=Cabana.Share().extend(Cabana.vars.Share.twitter,configOptions);options.user&&(shareUrl+="&via="+options.user),options.text&&(shareUrl+="&text="+encodeURIComponent(options.text.replace("[URL]",url))),options.hashtags&&(shareUrl+="&hashtags="+encodeURIComponent(options.hashtags)),this.shareTo(shareUrl,"twitter")},this.linkedin=function(url){var shareUrl=this.shareUrls.linkedin;shareUrl+="?mini=tru&url="+url;var options=Cabana.vars.Share.linkedin;shareUrl+=options.title?"&title="+encodeURIComponent(options.title):"&title="+encodeURIComponent(document.title);var description=document.querySelector("meta[name='description']")?document.querySelector("meta[name='description']").content:null;options.text?shareUrl+="&summary="+encodeURIComponent(options.text):description&&(shareUrl+="&summary="+encodeURIComponent(description)),this.shareTo(shareUrl,"linkedin")},this.google=this.googleplus=function(url){var shareUrl=this.shareUrls.google;shareUrl+="?url="+url,this.shareTo(shareUrl,"google")},this.mail=this.email=function(url){var options=Cabana.vars.Share.email;var shareUrl="mailto:";options.subject?(shareUrl+="?subject="+encodeURIComponent(options.subject?options.subject:document.title),shareUrl+="&"):shareUrl+="?",shareUrl+=options.text?"body="+encodeURIComponent(options.text.replace("[URL]",window.location.href)):"body="+window.location.href,this.shareTo(shareUrl,"email",!1)},this.print=function(){try{print(),this.tracking("print")}catch(e){}};var returnState=!1;try{this[this.type.toLowerCase()](this.url),returnState=!0}catch(e){Cabana.vars.Share.errors.push(e),returnState=!1}finally{return returnState}},addthis){var newAddthis=function(){var output={};for(var key in addthis){var type=typeof addthis[key];"function"==type?output[key]=function(){}:"object"==type?output[key]={}:output[key]=null;for(var nextKey in addthis[key]){var nextType=typeof addthis[key][nextKey];try{"function"==nextType?output[key][nextKey]=function(){}:"object"==nextType?output[key][nextKey]={}:output[key][nextKey]=null}catch(e){}}}return output};addthis=newAddthis()}else var addthis={};if(!addthis_sendto)var addthis_sendto;addthis_sendto=function(type){var preprocess=addthis.preprocess;return preprocess&&preprocess.url?(Cabana.Share({url:preprocess.url},type),preprocess.url="",preprocess.type="",void(preprocess.action="")):Cabana.Share(type)},addthis.init=function(){},addthis.update=function(action,type,url){addthis.preprocess={action:action,type:type,url:url}},[].forEach.call(document.querySelectorAll(".addthis"),function(container,index){Cabana.Share().addThis(container)});
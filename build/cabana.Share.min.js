"use strict";if(!Cabana)var Cabana={};if(Cabana.vars||(Cabana.vars={}),Cabana.vars.Share={twitter:{user:null,text:null,hashtags:null,icon:"//cdn.cabana.dk/modules/share/twitter.png"},email:{text:null,subject:null,icon:"//cdn.cabana.dk/modules/share/mail.png"},linkedin:{text:null,title:null,icon:"//cdn.cabana.dk/modules/share/linkedin.png"},google:{icon:"//cdn.cabana.dk/modules/share/google.png"},facebook:{icon:"//cdn.cabana.dk/modules/share/facebook.png"},tracking:!0,popup:!0,listeners:[],errors:[]},window.CabanaShareSettings)try{for(var key in window.CabanaShareSettings)for(var object in window.CabanaShareSettings[key])Cabana.vars.Share[key][object]=window.CabanaShareSettings[key][object]}catch(e){}if(Cabana.Share=function(){this.type=arguments[arguments.length-1];var config=arguments.length>1?arguments[0]:null,configOptions;config&&(config.url&&(this.url=config.url),config.options&&(configOptions=config.options)),this.url=this.url?this.url:window.location.href;var shareUrls=this.shareUrls={facebook:"https://www.facebook.com/sharer/sharer.php",twitter:"https://twitter.com/intent/tweet",linkedin:"https://www.linkedin.com/shareArticle",google:"https://plus.google.com/share"};if(this.isTouch=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},this.shareTo=function(url,type,newWindow){var startTime,endTime,elapsedTime,intentUrl,tryIntent=!1;this.isTouch()?("twitter"==type&&(intentUrl="twitter://post?message="+url,tryIntent=!0),tryIntent&&(newWindow=!1,startTime=(new Date).getTime(),document.location=intentUrl,endTime=(new Date).getTime(),elapsedTime=endTime-startTime),(void 0===elapsedTime||1>elapsedTime)&&(1==tryIntent?newWindow=!0:void 0,this.openWindow(url,newWindow))):this.openWindow(url,newWindow),this.tracking(type),this.fireListeners()},this.openWindow=function(url,newWindow){if(Cabana.vars.Share.popup&&newWindow!==!1){var windowWidth=screen.width/2,windowHeight=screen.height/2;var windowTop=screen.height/2-windowHeight/2,windowLeft=screen.width/2-windowWidth/2;return void window.open(url,"CabanaSharePopup","top="+windowTop+",left="+windowLeft+",toolbar=0,status=0,width="+windowWidth+",height="+windowHeight)}var anchor=document.createElement("a");anchor.href=url,anchor.target=newWindow!==!1?"_blank":"_self",anchor.style.position="absolute",anchor.style.display="inline-block",anchor.style.opacity="0",anchor.id="CabanaShareA",document.body.appendChild(anchor),anchor.onclick?anchor.onclick():anchor.click(),anchor.remove()},this.tracking=function(type){if(Cabana.vars.Share.tracking)if("undefined"!=typeof dataLayer)try{dataLayer.push({event:"Share."+type.toLowerCase(),title:document.title?document.title:"",url:location.href})}catch(e){}else this.fireEvent(type)},this.fireEvent=function(type){var e;var eventName="Share."+type;document.createEvent?(e=document.createEvent("Event"),e.initEvent(eventName,!0,!1)):(e=document.createEventObject(),e.eventType=eventName),e.eventName=eventName,document.createElement?document.dispatchEvent(e):e.fireEvent("on"+eventName,e)},0==arguments.length){var on=function(event,listenerFn){Cabana.vars.Share.listeners.push({event:event.toLowerCase(),callback:listenerFn})};var off=function(event){[].forEach.call(Cabana.vars.Share.listeners,function(listener,index){listener.event==event.toLowerCase()&&Cabana.vars.Share.listeners.splice(listener,1)})};var listeners=function(){return Cabana.vars.Share.listeners}();var addThis=function(container){var links=[];container.className.indexOf("addthis_button_")>-1&&links.push(container),links.forEach(function(link){var functionCall,classArray=link.className.split(" ");classArray.forEach(function(className){className.indexOf("addthis_button_")>-1&&(functionCall=className.replace("addthis_button_",""))}),functionCall&&(link.onclick=function(e){Cabana.vars.Share.trigger=e.target,Cabana.Share(functionCall.toLowerCase())}),"compact"==functionCall&&(link.onmouseover=function(e){Cabana.vars.Share.trigger=e.target,Cabana.Share(functionCall.toLowerCase())})})};var extend=function(){var artificial={};for(var i=0;i<arguments.length;i++)for(var key in arguments[i])arguments[i].hasOwnProperty(key)&&(artificial[key]=arguments[i][key]);return artificial};var config=function(configuration){var styleTest=document.querySelector('[data-share-element="style"]');if(configuration)var compactUsed=configuration.services_compact?!0:document.querySelectorAll(".addthis_button_compact").length>0;else var compactUsed=document.querySelectorAll(".addthis_button_compact").length>0;var shareServices=[];if(configuration&&configuration.services_compact&&!styleTest){var services=configuration.services_compact.split(","),existing=Cabana.Share("log");[].forEach.call(services,function(service,index){service.indexOf("google")>-1&&(service="google"),existing[service]&&shareServices.push(service)})}shareServices.length>0?renderShareBox(shareServices):compactUsed&&renderShareBox("all")};var renderShareBox=function(services){var boxQuery=".cabana-share-box";var boxTest=document.querySelector(boxQuery);boxTest&&boxTest.parentElement.removeChild(boxTest);var css="";css+='.cabana-share-box {position:absolute;background-color:#fff;box-shadow:rgba(0, 0, 0, 0.117647) 0px 1px 3px, rgba(0, 0, 0, 0.239216) 0px 1px 2px, rgba(0, 0, 0, 0.2) 0px 2px 6px;transition:all .3s cubic-bezier(0.2,0,0.4,1);opacity:0;transform-origin:top left;transform:scale(0);border-radius:1px;overflow:hidden;font-size:12px;color:#222;font-family:"Arial", sans-serif;z-index:2000;}',css+=".cabana-share-box ul{list-style-type:none;display:block;padding:0;margin:0;}",css+=".cabana-share-box ul li{padding:8px 10px;line-height:1.5;display:block;border-bottom:1px solid #f0f0f0;transition:all .3s cubic-bezier(0.2,0,0.4,1);cursor:pointer;padding-right:30px;}",css+=".cabana-share-box ul li:last-child{border-bottom:0;}",css+=".cabana-share-box ul li:hover{background-color:#f0f0f0;}",css+=".cabana-share-box object, .cabana-share-box img {float:left;width:20px;height:20px;margin-right:10px;}",css+=".cabana-share-box__twitter svg {color-fill:#f00;fill:#f00;}";var head=document.head||document.getElementsByTagName("head")[0];var style=document.createElement("style");style.setAttribute("data-share-element","style"),style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style);var box=document.createElement("div");box.className=boxQuery.replace(".",""),document.body.appendChild(box);var list=document.createElement("ul");if(box.appendChild(list),"all"==services){var preparedArray=[];preparedArray.push("email");for(var shareService in shareUrls)preparedArray.push(shareService);services=preparedArray}[].forEach.call(services,function(service,index){var listElement=document.createElement("li");var firstLetter=service.slice(0,1).toUpperCase();var serviceName=firstLetter+service.slice(1,service.length);var imageUrl=Cabana.vars.Share[service]?Cabana.vars.Share[service].icon:!1;var htmlContent="";imageUrl&&(htmlContent+='<img src="'+imageUrl+'" alt="'+service+'" />'),htmlContent+=serviceName,listElement.innerHTML=htmlContent,listElement.onclick=function(){Cabana.Share(service)},list.appendChild(listElement)})};var documentReady=function(){[].forEach.call(document.querySelectorAll('[class*="addthis"]'),function(container,index){Cabana.Share().addThis(container)});try{window.addthis_config?Cabana.Share().config(addthis_config):Cabana.Share().config()}catch(e){}};return function(){return{version:"0.4.0",on:on,off:off,listeners:listeners,addThis:addThis,extend:extend,config:config,documentReady:documentReady}}()}if(this.facebook=function(url){var shareUrl=this.shareUrls.facebook;shareUrl+="?u="+url,this.shareTo(shareUrl,"facebook")},this.twitter=function(url){var shareUrl=this.shareUrls.twitter;shareUrl+="?url="+url;var options=Cabana.Share().extend(Cabana.vars.Share.twitter,configOptions);options.user&&(shareUrl+="&via="+options.user),options.text&&(shareUrl+="&text="+encodeURIComponent(options.text.replace("[URL]",url))),options.hashtags&&(shareUrl+="&hashtags="+encodeURIComponent(options.hashtags)),this.shareTo(shareUrl,"twitter")},this.linkedin=function(url){var shareUrl=this.shareUrls.linkedin;shareUrl+="?mini=tru&url="+url;var options=Cabana.vars.Share.linkedin;shareUrl+=options.title?"&title="+encodeURIComponent(options.title):"&title="+encodeURIComponent(document.title);var description=document.querySelector("meta[name='description']")?document.querySelector("meta[name='description']").content:null;options.text?shareUrl+="&summary="+encodeURIComponent(options.text):description&&(shareUrl+="&summary="+encodeURIComponent(description)),this.shareTo(shareUrl,"linkedin")},this.google=this.googleplus=function(url){var shareUrl=this.shareUrls.google;shareUrl+="?url="+url,this.shareTo(shareUrl,"google")},this.mail=this.email=function(url){var options=Cabana.vars.Share.email;var shareUrl="mailto:";options.subject?(shareUrl+="?subject="+encodeURIComponent(options.subject?options.subject:document.title),shareUrl+="&"):shareUrl+="?",shareUrl+=options.text?"body="+encodeURIComponent(options.text.replace("[URL]",window.location.href)):"body="+window.location.href,this.shareTo(shareUrl,"email",!1)},this.print=function(){try{print(),this.tracking("print")}catch(e){}},this.compact=function(){var cabanaBox=document.querySelector(".cabana-share-box"),trigger=Cabana.vars.Share.trigger?Cabana.vars.Share.trigger:!1;if(trigger){var bodyOffset=document.body.getBoundingClientRect(),triggerOffset=trigger.getBoundingClientRect();var offsetTop=triggerOffset.top-bodyOffset.top+triggerOffset.height,offsetLeft=triggerOffset.left-bodyOffset.left+triggerOffset.width;cabanaBox.style.left=offsetLeft+"px",cabanaBox.style.top=offsetTop+"px",cabanaBox.style.opacity="1",cabanaBox.style.transform="scale(1)",cabanaBox.onmouseenter=function(){cabanaBox.onmouseleave=function(){cabanaBox.onmouseenter=function(){},cabanaBox.onmouseleave=function(){},cabanaBox.style.opacity="0",cabanaBox.style.transform="scale(0)"}}}},"log"==this.type)return this;var returnState=!1;try{this[this.type.toLowerCase()](this.url),returnState=!0}catch(e){Cabana.vars.Share.errors.push(e),returnState=!1}finally{return returnState}},addthis){var newAddthis=function(){var output={};for(var key in addthis){var type=typeof addthis[key];"function"==type?output[key]=function(){}:"object"==type?output[key]={}:output[key]=null;for(var nextKey in addthis[key]){var nextType=typeof addthis[key][nextKey];try{"function"==nextType?output[key][nextKey]=function(){}:"object"==nextType?output[key][nextKey]={}:output[key][nextKey]=null}catch(e){}}}return output};addthis=newAddthis()}else var addthis={};if(!addthis_sendto)var addthis_sendto;addthis_sendto=function(type){var preprocess=addthis.preprocess;return preprocess&&preprocess.url?(Cabana.Share({url:preprocess.url},type),preprocess.url="",preprocess.type="",void(preprocess.action="")):Cabana.Share(type)},addthis.init=function(){},addthis.update=function(action,type,url){addthis.preprocess={action:action,type:type,url:url}},"complete"==document.readyState?Cabana.Share().documentReady():document.addEventListener?document.addEventListener("DOMContentLoaded",function(){Cabana.Share().documentReady()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&(document.detachEvent("onreadystatechange",aguments.callee),Cabana.Share().documentReady())});